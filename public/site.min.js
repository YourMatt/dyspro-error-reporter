var app=angular.module("ErrorReporter",[]);$(document).ready(function(){utilities.formatJsonTables(),$(".popover-link").on("show.bs.popover",function(){$("#popover-shade").height($(document).height()-1).show()}).on("hidden.bs.popover",function(){$("#popover-shade").hide()})}),app.controller("DashboardController",["$scope",function(t){localStorage.selectedEnvironment||(localStorage.selectedEnvironment="Dev"),t.currentEnvironment=localStorage.selectedEnvironment,t.errorOccurrences=[],t.totalErrors=0,t.monitors=[],t.monitorStats=[],t.changeEnvironmentTab=dashboardPage.changeEnvironmentTab,t.$watch("monitorStats",dashboardPage.handleMonitorStatsChange,!0),dashboardPage.init(t)}]);var dashboardPage={angularScope:null,init:function(t){dashboardPage.angularScope=t,dashboardPage.loadMonitors(),dashboardPage.loadErrorOccurrences()},updateAngularValue:function(t){t();var e=dashboardPage.angularScope.$root.$$phase;"$apply"!==e&&"$digest"!==e&&dashboardPage.angularScope.$apply()},loadMonitors:function(){$.ajax("/api/monitors/"+dashboardPage.angularScope.currentEnvironment).done(function(t){dashboardPage.updateAngularValue(function(){dashboardPage.angularScope.monitors=t,dashboardPage.loadMonitorStats()})}).fail(function(t){notifications.errorFromServiceResponse(t)})},loadMonitorStats:function(){$.each(dashboardPage.angularScope.monitors,function(t,e){$.ajax("/api/monitor/"+e.monitorId+"/stats/day").done(function(t){dashboardPage.updateAngularValue(function(){dashboardPage.angularScope.monitorStats[e.monitorId]=t[0]})}).fail(function(t){notifications.errorFromServiceResponse(t)})})},loadErrorOccurrences:function(t){$.ajax("/api/errors/"+dashboardPage.angularScope.currentEnvironment+(t?"/"+t:"")).done(function(t){dashboardPage.updateAngularValue(function(){dashboardPage.angularScope.errorOccurrences=t,dashboardPage.angularScope.totalErrors=t.length})}).fail(function(t){notifications.errorFromServiceResponse(t)})},changeEnvironmentTab:function(t){localStorage.selectedEnvironment=t,dashboardPage.updateAngularValue(function(){dashboardPage.angularScope.currentEnvironment=localStorage.selectedEnvironment}),dashboardPage.loadMonitors(),dashboardPage.loadErrorOccurrences()},handleMonitorStatsChange:function(t){t.length&&($("scores",$("#ProgressGraphData")).text(t[9].averagedStats),$("dates",$("#ProgressGraphData")).text(t[9].averagedStats),dysproGraph.buildGraph())}},Error=function(){this.error_id=0,this.account_id=0,this.product="",this.stack_trace=""},ErrorOccurrence=function(){this.error=new Error,this.error_occurrence_id=0,this.environment="",this.message="",this.server="",this.user_name="",this.date=0,this.attachments=[]},ErrorAttachment=function(){this.file_name="",this.file_type=""},ErrorOccurrenceStats=function(){this.num_occurrences=0,this.date_first_occurrence=0,this.date_last_occurrence=0,this.all_on_single_day=!1};app.controller("ErrorHistoryController",["$scope",function(a){a.error_occurrences=[];var t="",e=$("environment","#error-occurrence-metadata").text();if(e){var r=$("errorid","#error-occurrence-metadata").text();t="/api/errors/"+e+"/"+r}else"undefined"!=typeof current_environment&&(t="/api/errors/"+current_environment);t&&(a.reloadErrorOccurrences=function(){$.ajax(t).done(function(t){if(t.error)console.log("Error: "+t.error);else{a.error_occurrences=[];for(var e=new ErrorOccurrenceStats,r=0;r<t.length;r++){var o=new ErrorOccurrence;o.error_occurrence_id=t[r].ErrorOccurrenceId,o.environment=t[r].Environment,o.message=t[r].Message,o.server=t[r].Server,o.user_name=t[r].UserName,o.date=moment(t[r].Date),o.error.error_id=t[r].ErrorId,o.error.account_id=t[r].AccountId,o.error.product=t[r].Product,o.error.stack_trace=t[r].StackTrace,a.error_occurrences.push(o),e.num_occurrences++,(!e.date_first_occurrence||moment(t[r].Date)<e.date_first_occurrence)&&(e.date_first_occurrence=moment(t[r].Date)),moment(t[r].Date)>e.date_last_occurrence&&(e.date_last_occurrence=moment(t[r].Date))}e.date_first_occurrence.format("MMDDYYYY")==e.date_last_occurrence.format("MMDDYYYY")&&(e.all_on_single_day=!0),a.error_occurrence_stats=e,a.$apply(),$("#RecentErrors").removeClass("hidden")}})},a.reloadErrorOccurrences())}]),$(document).ready(function(){}),app.controller("SettingsController",["$scope",function(t){t.user={},t.isUserFormSubmitDisabled=!0,t.monitors=[],t.products=[],t.environments=[],t.monitor={},t.monitorTestResults={},t.isMonitorFormSubmitDisabled=!0,t.saveUser=settingsPage.userForm.saveUser,t.saveMonitor=settingsPage.monitorForm.saveMonitor,t.resetForm=settingsPage.monitorForm.resetForm,t.selectMonitor=settingsPage.monitorForm.loadMonitor,t.selectProduct=settingsPage.monitorForm.selectExistingProduct,t.selectEnvironment=settingsPage.monitorForm.selectExistingEnvironment,t.$watch("monitor.intervalSeconds",settingsPage.monitorForm.handleIntervalSecondsChange),settingsPage.init(t)}]);var settingsPage={angularScope:null,init:function(t){settingsPage.angularScope=t,settingsPage.userForm.userId=$("userid","#account-metadata").text(),settingsPage.userForm.loadUser(),settingsPage.monitorForm.loadMonitors(),settingsPage.monitorForm.loadProducts(),settingsPage.monitorForm.loadEnvironments(),settingsPage.monitorForm.initializeForm()},updateAngularValue:function(t){t();var e=settingsPage.angularScope.$root.$$phase;"$apply"!==e&&"$digest"!==e&&settingsPage.angularScope.$apply()},userForm:{userId:0,originalEmailAddress:"",formEnableSubmit:function(){settingsPage.updateAngularValue(function(){settingsPage.angularScope.isUserFormSubmitDisabled=!1})},formDisableSubmit:function(){settingsPage.updateAngularValue(function(){settingsPage.angularScope.isUserFormSubmitDisabled=!0})},initializeForm:function(){$("#setting-user-phone").mask("000-000-0000"),$("#setting-user-phone").val($("#setting-user-phone").masked()),settingsPage.userForm.formEnableSubmit()},getUserDataForSave:function(t){var e={name:t.name,email:t.email,phone:$("#setting-user-phone").cleanVal()},r=$("#setting-user-password-new").val();return r&&(e.password=r),e},loadUser:function(){$.ajax("/api/user/"+settingsPage.userForm.userId).done(function(t){settingsPage.userForm.originalEmailAddress=t.email,settingsPage.updateAngularValue(function(){settingsPage.angularScope.user=t}),settingsPage.userForm.initializeForm()}).fail(function(t){notifications.errorFromServiceResponse(t)})},saveUser:function(){settingsPage.userForm.isFormUserValidated()&&(settingsPage.userForm.formDisableSubmit(),$.ajax({type:"put",url:"/api/user/"+settingsPage.userForm.userId,data:settingsPage.userForm.getUserDataForSave(settingsPage.angularScope.user)}).done(function(t){$("#setting-user-password-current").val(""),$("#setting-user-password-new").val(""),settingsPage.userForm.originalEmailAddress=$("#setting-user-email").val(),notifications.success("Successfully saved your user information.")}).fail(function(t){notifications.errorFromServiceResponse(t)}).always(function(){settingsPage.userForm.formEnableSubmit()}))},isFormUserValidated:function(){var t="",e=$("#setting-user-phone").val();e.length&&12!==e.length&&(t="Invalid phone number."),$("#setting-user-phone")[0].setCustomValidity(t);var r=$("#setting-user-password-current").val();if(r?$.ajax({async:!1,type:"post",url:"/api/user/authenticate",data:{email:settingsPage.userForm.originalEmailAddress,password:r}}).done(function(){$("#setting-user-password-current")[0].setCustomValidity("")}).fail(function(){$("#setting-user-password-current")[0].setCustomValidity("Your original password is incorrect.")}):$("#setting-user-password-new").val(""),!1===$("#form-user")[0].checkValidity())return!1;var o=$("#setting-user-password-new").val();if(o){var a=$("#setting-user-password-new-confirm").val();if(!a)return $("#modal-password-confirm").on("shown.bs.modal",function(t){$("#setting-user-password-new-confirm").focus()}),$("#modal-password-confirm").modal(),!1;var i="";if(a!==o&&(i="Your password does not match what was entered."),$("#setting-user-password-new-confirm")[0].setCustomValidity(i),!1===$("#form-password-confirm")[0].checkValidity())return!1;$("#modal-password-confirm").modal("hide")}return!0}},monitorForm:{originalMonitorEndpointUri:"",formEnableSubmit:function(){settingsPage.updateAngularValue(function(){settingsPage.angularScope.isMonitorFormSubmitDisabled=!1})},formDisableSubmit:function(){settingsPage.updateAngularValue(function(){settingsPage.angularScope.isMonitorFormSubmitDisabled=!0})},getMonitorDataForSave:function(t){return{endpointUri:t.endpointUri,intervalSeconds:t.intervalSeconds,product:t.productName,environment:t.environmentName}},initializeForm:function(){settingsPage.monitorForm.formEnableSubmit(),settingsPage.monitorForm.resetForm(),$("input[name=setting-monitor-interval]").change(function(){var t=$(this).val();settingsPage.updateAngularValue(function(){settingsPage.angularScope.monitor.intervalSeconds=t})}),$("#button-delete").popover({content:$("#popover-content-delete-confirmation").html(),html:!0,placement:"bottom",template:'<div class="popover popover-confirmation" role="tooltip"><div class="arrow"></div><div class="popover-body"></div></div>'}).on("show.bs.popover",function(){$("#button-delete").prop("disabled",!0)}).on("hidden.bs.popover",function(){$("#button-delete").prop("disabled",!1)}),$(document).on("click","#button-delete-cancel",function(){$("#button-delete").popover("hide")}).on("click","#button-delete-confirm",function(){settingsPage.monitorForm.delete(),$("#button-delete").popover("hide")}),$("#link-about-metrics-on-page, #link-about-metrics-in-modal").popover({content:$("#popover-content-about-metrics").html(),html:!0,placement:"bottom",trigger:"focus"})},resetForm:function(){settingsPage.updateAngularValue(function(){settingsPage.angularScope.monitor={intervalSeconds:60}})},loadMonitors:function(){$.ajax("/api/monitors").done(function(t){settingsPage.updateAngularValue(function(){settingsPage.angularScope.monitors=t})}).fail(function(t){notifications.errorFromServiceResponse(t)})},loadMonitor:function(t){$.ajax("/api/monitor/"+t).done(function(t){settingsPage.monitorForm.originalMonitorEndpointUri=t.endpointUri,settingsPage.updateAngularValue(function(){settingsPage.angularScope.monitor=t}),utilities.scrollToTopOfPage()}).fail(function(t){notifications.errorFromServiceResponse(t)})},loadProducts:function(){$.ajax("/api/products").done(function(t){settingsPage.updateAngularValue(function(){settingsPage.angularScope.products=t})}).fail(function(t){notifications.errorFromServiceResponse(t)})},loadEnvironments:function(){$.ajax("/api/environments").done(function(t){settingsPage.updateAngularValue(function(){settingsPage.angularScope.environments=t})}).fail(function(t){notifications.errorFromServiceResponse(t)})},selectExistingProduct:function(t){settingsPage.updateAngularValue(function(){settingsPage.angularScope.monitor.productName=t})},selectExistingEnvironment:function(t){settingsPage.updateAngularValue(function(){settingsPage.angularScope.monitor.environmentName=t})},handleIntervalSecondsChange:function(t){t!=$("input[name=setting-monitor-interval]:checked").val()&&$("input[name=setting-monitor-interval][value="+t+"]").parent().click()},saveMonitor:function(){settingsPage.monitorForm.isFormValidated()&&(settingsPage.monitorForm.formDisableSubmit(),settingsPage.angularScope.monitor.endpointUri===settingsPage.monitorForm.originalMonitorEndpointUri?settingsPage.angularScope.monitor.monitorId?$.ajax({type:"put",url:"/api/monitor/"+settingsPage.angularScope.monitor.monitorId,data:settingsPage.monitorForm.getMonitorDataForSave(settingsPage.angularScope.monitor)}).done(function(t){settingsPage.monitorForm.loadMonitors(),settingsPage.monitorForm.loadProducts(),settingsPage.monitorForm.loadEnvironments(),settingsPage.monitorForm.resetForm(),notifications.success("Successfully saved your monitor.")}).fail(function(t){notifications.errorFromServiceResponse(t)}).always(function(){$("#modal-endpoint-uri-test").modal("hide"),settingsPage.monitorForm.formEnableSubmit()}):$.ajax({type:"post",url:"/api/monitor",data:settingsPage.monitorForm.getMonitorDataForSave(settingsPage.angularScope.monitor)}).done(function(t){settingsPage.monitorForm.loadMonitors(),settingsPage.monitorForm.loadProducts(),settingsPage.monitorForm.loadEnvironments(),settingsPage.monitorForm.resetForm(),notifications.success("Successfully saved your new monitor.")}).fail(function(t){notifications.errorFromServiceResponse(t)}).always(function(){$("#modal-endpoint-uri-test").modal("hide"),settingsPage.monitorForm.formEnableSubmit()}):$.ajax("/api/monitor/test/"+encodeURIComponent(settingsPage.angularScope.monitor.endpointUri)).done(function(t){if(!t.statusCode)return settingsPage.monitorForm.formEnableSubmit(),$("#setting-monitor-endpoint-uri")[0].setCustomValidity(t.requestErrorMessage),$("#setting-monitor-endpoint-uri")[0].reportValidity(),$("#form-monitor")[0].checkValidity(),void notifications.error("The Endpoint URI cannot be used. "+t.requestErrorMessage);t.responseParsed.responseTime=t.responseMilliseconds+"ms",t.statusText=settingsPage.monitorForm.evaluateHttpStatus(t.statusCode),settingsPage.updateAngularValue(function(){settingsPage.angularScope.monitorTestResults=t}),settingsPage.monitorForm.originalMonitorEndpointUri=settingsPage.angularScope.monitor.endpointUri,$("#modal-endpoint-uri-test").modal()}).fail(function(t){notifications.errorFromServiceResponse(t)}).always(function(){settingsPage.monitorForm.formEnableSubmit()}))},delete:function(){var t=settingsPage.angularScope.monitor.monitorId;$.ajax({type:"delete",url:"/api/monitor/"+t}).done(function(t){settingsPage.monitorForm.loadMonitors(),settingsPage.monitorForm.resetForm(),notifications.success("Successfully deleted the monitor.")}).fail(function(t){notifications.errorFromServiceResponse(t)})},isFormValidated:function(){return $("#setting-monitor-endpoint-uri")[0].setCustomValidity(""),!1!==$("#form-monitor")[0].checkValidity()},evaluateHttpStatus:function(t){return 200<=t&&t<300?"success":400<=t&&t<600?"error":"warning"}}};app.directive("fixerrorlistwidth",function(){return function(t,e,r){t.$last&&utilities.restrictFullWidthTableToMaxWidthOfArea()}}),app.filter("firstLine",function(){return function(t){return t.split("\n")[0]}}),app.filter("formatDate",function(){return function(t,e){return e||(e="MM/DD [at] h:mm A"),moment(t).format(e)}}),$(document).ready(function(){dysproGraph.buildGraph()}),$(window).resize(function(){dysproGraph.buildGraph()});var dysproGraph={graphType:"",graphData:{dataPoints:[],dates:[],stats:{highScore:0,lowScore:0,highLevel:0},totalScores:0,highScoreIndex:0,lastSelectedIndex:0},lastGraphType:"",lastBuildWidth:0,canvas:null,dims:{width:0,height:0,graphPositionTop:0,graphPositionBottom:0,graphPositionLeft:0,graphPositionRight:0,graphWidth:0,graphHeight:0,graphScoreSpacing:0,graphLevelSpacing:0,graphMarginTop:30,graphMarginBottom:50,graphMarginMinLeft:25,labelMarginTop:5,labelMarginLeft:10,labelMarginBottom:14,graphPadding:5},colors:{axisLine:"#888888",graphLine:"#333333",levelWithoutTime:"#e6e6e6",alert:["#ed2024","#e85c25","#e98423","#e9b235","#e4c634","#d5d026","#cece25","#aed147","#93c847","#69bd45"]},sizes:{axisLine:2,graphLine:3,bestLine:1,barGraphWidthPercent:80,labelSmall:14,labelMedium:20,labelLarge:26,animationTime:250},elements:{scoreIndicatorLine:null,scoreIndicatorScore:null,scoreIndicatorDate:null,graphLine:null},buildGraph:function(){this.initializeGraph()&&(this.canvas.clear(),this.drawGraph())},initializeGraph:function(){return!!$("#ProgressGraph").length&&(this.canvas||(this.canvas=Snap("#ProgressGraph")),this.graphType=$("#ProgressGraph").attr("graphtype"),this.dims.width=$("#ProgressGraph").width(),this.dims.height=$("#ProgressGraph").height(),this.lastBuildWidth=this.dims.width,this.lastGraphType=this.graphType,this.graphData.dataPoints=this.splitDataElementsAsInt($("scores",$("#ProgressGraphData")).text()),this.graphData.dates=this.splitDataElementsAsInt($("dates",$("#ProgressGraphData")).text()),this.graphData.totalScores=this.graphData.dataPoints.length,this.loadGameStats(),this.loadGraphPositions(),!0)},loadGraphPositions:function(){this.dims.graphPositionTop=this.dims.graphMarginTop,this.dims.graphPositionBottom=this.dims.height-this.dims.graphMarginBottom,this.dims.graphHeight=this.dims.graphPositionBottom-this.dims.graphPositionTop,this.dims.graphPositionLeft=this.dims.graphMarginMinLeft,this.dims.graphPositionRight=this.dims.width-this.dims.graphPositionLeft,this.dims.graphWidth=this.dims.graphPositionRight-this.dims.graphPositionLeft},loadGameStats:function(){var t=0,e=0,r=this.graphData.dataPoints.length;if(r){t=this.graphData.dataPoints[0],e=this.graphData.dataPoints[0];for(var o=0;o<r;o++)this.graphData.dataPoints[o]>t&&(t=this.graphData.dataPoints[o]),this.graphData.dataPoints[o]<e&&(e=this.graphData.dataPoints[o]),this.graphData.dataPoints[o]}this.graphData.stats.highScore=t,this.graphData.stats.lowScore=e,this.graphData.stats.highLevel=0},drawGraph:function(){"line"==this.graphType&&this.drawLineGraph()},drawLineGraph:function(){this.drawAxisLines();var t=this.dims.graphPositionTop+this.dims.graphPadding,e=this.dims.graphPositionBottom-this.dims.graphPadding,r=e-t,o="",a=this.graphData.dataPoints.length,i=a-1,n=0,s=0,c=0,d=0,g=0,l=0,h=0,p=0,m=0;if(this.dims.graphScoreSpacing=this.dims.graphWidth/i,1==this.graphData.totalScores)o="M{0} {1}L{2} {3}".format(this.dims.graphPositionLeft,this.dims.graphPositionTop+this.dims.graphHeight/2,this.dims.graphPositionRight,this.dims.graphPositionTop+this.dims.graphHeight/2);else for(var u=0;u<a;u++)n=parseInt(this.dims.graphPositionLeft+u*this.dims.graphScoreSpacing),c=parseInt(e-r*(this.graphData.dataPoints[u]-this.graphData.stats.lowScore)/(this.graphData.stats.highScore-this.graphData.stats.lowScore)),u?(s=parseInt(this.dims.graphPositionLeft+(u-.5)*this.dims.graphScoreSpacing),l=c,(m=0)<u&&u<a-1&&(this.graphData.dataPoints[u-1]<this.graphData.dataPoints[u]&&this.graphData.dataPoints[u]<this.graphData.dataPoints[u+1]?m=-1:this.graphData.dataPoints[u-1]>this.graphData.dataPoints[u]&&this.graphData.dataPoints[u]>this.graphData.dataPoints[u+1]&&(m=1),m&&(g=parseInt(e-r*(this.graphData.dataPoints[u+1]-this.graphData.stats.lowScore)/(this.graphData.stats.highScore-this.graphData.stats.lowScore)),l=c-m*(p=Math.min(m*(c-d),m*(g-c))))),h||(h=d),o+="C{0} {1} {2} {3} {4} {5}".format(s,h,s,l,n,c)):o+="M{0} {1}".format(n,c),this.graphData.dataPoints[u]==this.graphData.stats.highScore&&(this.graphData.highScoreIndex=u,this.graphData.lastSelectedIndex=u,this.drawScoreIndicator(n,u)),this.canvas.rect(u?s:this.dims.graphPositionLeft,this.dims.graphPositionTop,this.dims.graphWidth/i,this.dims.graphHeight).attr({fill:"rgba(255,255,255,0)",scoreIndex:u,linePositionLeft:n}).mouseover(dysproGraphEventHandlers.moveScoreIndicator),d=c,h=m?c+m*p:0;var f={stroke:this.colors.graphLine,strokeWidth:this.sizes.graphLine,fill:"none"};this.elements.graphLine=this.canvas.path(o).attr(f)},drawAxisLines:function(){var t={stroke:this.colors.axisLine,strokeWidth:this.sizes.axisLine};this.canvas.path("M{0} {1}L{2} {3}".format(this.dims.graphPositionLeft,this.dims.graphPositionBottom,this.dims.graphPositionRight,this.dims.graphPositionBottom)).attr(t),this.canvas.path("M{0} {1}L{2} {3}".format(this.dims.graphPositionLeft,this.dims.graphPositionTop,this.dims.graphPositionLeft,this.dims.graphPositionBottom)).attr(t)},drawScoreIndicator:function(t,e){var r={fontSize:this.sizes.labelMedium+"px",fill:this.colors.alert[0]},o={fontSize:this.sizes.labelSmall+"px",fill:this.colors.alert[0]},a={stroke:this.colors.alert[0],strokeWidth:this.sizes.bestLine,fill:"none",strokeDasharray:"5,5"};this.elements.scoreIndicatorLine=this.canvas.path("M{0} {1}L{2} {3}".format(t,this.dims.graphPositionTop,t,this.dims.graphPositionBottom)).attr(a),this.elements.scoreIndicatorScore=this.canvas.text(0,0,this.graphData.stats.highScore.toLocaleString()).attr(r),this.elements.scoreIndicatorScore.transform("t{0},{1}".format(t-this.elements.scoreIndicatorScore.getBBox().width/2,this.dims.graphPositionTop-this.dims.labelMarginTop));var i=new Date(this.graphData.dates[e]);this.elements.scoreIndicatorDate=this.canvas.text(0,0,moment.unix(i).format("MM/DD/YYYY")).attr(o),this.elements.scoreIndicatorDate.transform("t{0},{1}".format(t-this.elements.scoreIndicatorDate.getBBox().width/2,this.dims.graphPositionBottom+this.sizes.labelSmall))},splitDataElementsAsInt:function(t){for(var e=t.split(","),r=0;r<e.length;r++)e[r]=parseInt(e[r]);return e}},dysproGraphEventHandlers={moveScoreIndicator:function(t){var e,r=t.target.attributes.scoreIndex.value,o=t.target.attributes.linePositionLeft.value,a=.1<Math.abs(dysproGraph.graphData.lastSelectedIndex-r)/dysproGraph.graphData.totalScores,i=dysproGraph.graphData.dataPoints[r]-dysproGraph.graphData.stats.lowScore,n=dysproGraph.graphData.stats.highScore-dysproGraph.graphData.stats.lowScore+1,s=Math.ceil(10*(1-i/n))-1;e="t{0},{1}".format((r-dysproGraph.graphData.highScoreIndex)*dysproGraph.dims.graphScoreSpacing,0),a?dysproGraph.elements.scoreIndicatorLine.animate({transform:e},dysproGraph.sizes.animationTime):dysproGraph.elements.scoreIndicatorLine.transform(e);var c=new Date(dysproGraph.graphData.dates[r]);dysproGraph.elements.scoreIndicatorDate.attr({text:moment.unix(c).format("MM/DD/YYYY")}),e="t{0},{1}".format(o-dysproGraph.elements.scoreIndicatorDate.getBBox().width/2,dysproGraph.dims.graphPositionBottom+dysproGraph.sizes.labelSmall),a?dysproGraph.elements.scoreIndicatorDate.animate({transform:e},dysproGraph.sizes.animationTime):dysproGraph.elements.scoreIndicatorDate.transform(e),dysproGraph.elements.scoreIndicatorScore.attr({text:dysproGraph.graphData.dataPoints[r].toLocaleString()}),e="t{0},{1}".format(o-dysproGraph.elements.scoreIndicatorScore.getBBox().width/2,dysproGraph.dims.graphPositionTop-dysproGraph.dims.labelMarginTop),a?dysproGraph.elements.scoreIndicatorScore.animate({transform:e},dysproGraph.sizes.animationTime):dysproGraph.elements.scoreIndicatorScore.transform(e),dysproGraph.elements.scoreIndicatorLine.animate({stroke:dysproGraph.colors.alert[s]},dysproGraph.sizes.animationTime),dysproGraph.elements.scoreIndicatorDate.animate({fill:dysproGraph.colors.alert[s]},dysproGraph.sizes.animationTime),dysproGraph.elements.scoreIndicatorScore.animate({fill:dysproGraph.colors.alert[s]},dysproGraph.sizes.animationTime),dysproGraph.graphData.lastSelectedIndex=r}},notifications={success:function(t){toastr.success(t)},error:function(t){toastr.error(t)},errorFromServiceResponse:function(t){switch(t.status){case 0:return toastr.error("Error connecting to server. Please try again in a few moments.","Communication Error");case 401:return toastr.error("You were signed out after a period of inactivity. Please sign in and try again.<br/>Redirecting in <span id='notification-redirect-seconds'>5</span> seconds...","Authentication Error",{timeout:5e3,onShown:function(){var t=5;window.setInterval(function(){$("#notification-redirect-seconds").text(--t)},1e3)},onHidden:function(){document.location="/"}})}if(t.responseJSON&&t.responseJSON.error)return toastr.error(t.responseJSON.error);toastr.error("An unhandled error has occurred.",t.status+" error")}};String.prototype.format=function(){var t=this;for(var e in arguments)t=t.replace("{"+e+"}",arguments[e]);return t};var utilities={scrollToTopOfPage:function(){$("html, body").stop().animate({scrollTop:0},300,"swing")},formatJsonTables:function(){$.each($(".table-json"),function(t,e){var r=$(e).text();try{for(var o=JSON.parse(r),a=[],i=0;i<o.length;i++)for(var n in o[i])a.indexOf(n)<0&&a.push(n);var s="<table class='table'>";s+="<tr>";for(i=0;i<a.length;i++)s+="<td>"+a[i]+"</td>";s+="</tr>";for(i=0;i<o.length;i++){s+="<tr>";for(var c=0;c<a.length;c++){void 0===(r=o[i][a[c]])&&(r=""),s+="<td>"+r+"</td>"}s+="</tr>"}s+="</table>",$(e).html(s)}catch(t){}})},restrictFullWidthTableToMaxWidthOfArea:function(){$(".table-full-width .text-truncate").css("width",$(".table-full-width").parent().width())}};
//# sourceMappingURL=site.min.js.map